(function(e){function t(t){for(var o,r,l=t[0],a=t[1],c=t[2],u=0,h=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],o=!0,l=1;l<i.length;l++){var a=i[l];0!==n[a]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},n={app:0},s=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=a;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},2256:function(e,t,i){},2309:function(e,t,i){},"3a1b":function(e,t,i){},"490c":function(e,t,i){"use strict";i("2309")},"5fcb":function(e,t,i){"use strict";i("e20d")},"827d":function(e,t,i){"use strict";i("2256")},"851b":function(e,t,i){"use strict";i("3a1b")},cd49:function(e,t,i){"use strict";i.r(t);var o=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-navigation-drawer",{attrs:{absolute:"",width:"360"},on:{transitionend:function(t){!e.drawer&&(e.drawerSwitch=!0)}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("v-toolbar",{attrs:{color:"primary"}},[i("v-toolbar-title",[e._v("Live2D Viewer")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(t){e.creation.dialog=!0}}},[i("v-icon",[e._v("mdi-plus")])],1),i("v-btn",{attrs:{icon:""},on:{click:function(t){return e.showUI(!1)}}},[i("v-icon",[e._v("mdi-close")])],1)],1),i("v-divider"),i("ModelEditor",{attrs:{id:e.selectedModelID}})],1),i("v-main",[i("v-container",{staticClass:"pa-0 fill-height flex-column",attrs:{fluid:""}},[i("v-spacer"),i("ModelList",{attrs:{show:e.modelList.visible},model:{value:e.selectedModelID,callback:function(t){e.selectedModelID=t},expression:"selectedModelID"}})],1),i("ModelCreation",{model:{value:e.creation.dialog,callback:function(t){e.$set(e.creation,"dialog",t)},expression:"creation.dialog"}})],1),i("v-fab-transition",[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.drawerSwitch,expression:"drawerSwitch"}],attrs:{fab:"",top:"",left:"",absolute:"",dark:"",color:"accent"},on:{click:function(t){return e.showUI(!0)}}},[i("v-icon",[e._v("mdi-plus")])],1)],1)],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-slide-y-reverse-transition",[e.show&&e.models.length?i("v-sheet",{staticClass:"pa-4",attrs:{width:"100%"}},[i("v-row",[i("v-item-group",{staticClass:"d-flex",attrs:{mandatory:""},on:{change:e.select}},e._l(e.models,(function(t){return i("v-item",{key:t.id,scopedSlots:e._u([{key:"default",fn:function(o){o.active;var n=o.toggle;return[i("v-card",{staticClass:"ma-2",attrs:{color:t.error?"#631f1f":"blue-grey darken-4"},on:{click:n}},[i("v-tooltip",{attrs:{top:"",disabled:!t.error},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on,s=o.attrs;return[i("v-img",e._g(e._b({attrs:{contain:"",src:t.thumbnail,width:t.error?void 0:192*t.aspectRatio,height:"192"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t.error?i("v-icon",[e._v("mdi-alert-circle")]):i("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},"v-img",s,!1),n),[i("v-card-title",{staticClass:"pa-1 subtitle-1"},[e._v(e._s(t.name))])],1)]}}],null,!0)},[e._v(" "+e._s(t.error)+" ")])],1)]}}],null,!0)})})),1)],1)],1):e._e()],1)},l=[],a=o["a"].extend({name:"ModelList",props:{value:Number,show:Boolean},data:()=>({models:[]}),created(){this.models=this.$live2dApp.models},methods:{select(e){this.$emit("input",e)}}}),c=a,d=(i("827d"),i("2877")),u=i("6544"),h=i.n(u),v=i("b0af"),p=i("99d9"),f=i("132d"),m=i("adda"),g=i("d903"),b=i("604c"),x=i("490a"),w=i("0fd9"),M=i("8dd9"),_=i("0789"),y=i("3a2f"),F=Object(d["a"])(c,r,l,!1,null,"31945045",null),V=F.exports;h()(F,{VCard:v["a"],VCardTitle:p["c"],VIcon:f["a"],VImg:m["a"],VItem:g["a"],VItemGroup:b["b"],VProgressCircular:x["a"],VRow:w["a"],VSheet:M["a"],VSlideYReverseTransition:_["f"],VTooltip:y["a"]});var A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"800"},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"primary",flat:"",dense:""}},[i("v-toolbar-title",[e._v("Create Model")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:e.create}},[i("v-icon",[e._v("mdi-checkbox-marked-circle-outline")])],1)],1),i("v-card-text",{staticClass:"pa-8"},[i("v-row",[i("v-text-field",{attrs:{label:"URL","single-line":"",filled:"",rules:e.urlRules},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),i("v-row",[i("v-spacer"),i("v-btn",{attrs:{color:"blue-grey"},on:{click:function(t){e.picker.dialog=!0}}},[e._v(" From source... "),i("v-icon",{attrs:{right:""}},[e._v(" mdi-cloud-search ")])],1)],1)],1)],1),i("ModelPicker",{on:{select:function(t){e.url=t}},model:{value:e.picker.dialog,callback:function(t){e.$set(e.picker,"dialog",t)},expression:"picker.dialog"}})],1)},I=[],k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"80vw"},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",{staticClass:"d-flex flex-column",attrs:{height:"80vh"}},[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"primary",flat:"",dense:""}},[i("v-toolbar-title",[e._v("Select a Model")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:e.submit}},[i("v-icon",[e._v("mdi-checkbox-marked-circle-outline")])],1)],1),i("v-row",{staticClass:"content-row flex-grow-1",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"content-col"},[i("v-card-text",[i("v-treeview",{attrs:{activatable:"","return-object":"","load-children":e.fetchModels,active:e.activeFolders,items:e.tree,"item-key":"id","open-on-click":""},on:{"update:active":function(t){t.length&&(e.activeFolders=t)},"update:open":e.folderOpened},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.open;return[i("v-icon",[e._v(" "+e._s(o?"mdi-folder-open":"mdi-folder")+" ")])]}}])})],1)],1),i("v-divider",{attrs:{vertical:""}}),i("v-col",{staticClass:"content-col"},[i("v-card-text",[i("v-list-item-group",{model:{value:e.selectedFileIndex,callback:function(t){e.selectedFileIndex=t},expression:"selectedFileIndex"}},e._l(e.activeFolderFiles,(function(t,o){return i("v-list-item",{key:t,attrs:{color:"primary"},nativeOn:{dblclick:function(t){e.selectedFileIndex=o,e.submit()}}},[i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t))])],1)],1)})),1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-alert",{directives:[{name:"visible",rawName:"v-visible",value:e.alert,expression:"alert"}],staticClass:"mb-0",attrs:{dense:"",text:"",type:"error"}},[e._v(e._s(e.alert))])],1)],1)],1)},C=[],R=i("41c6"),O=i.n(R);let j=0;const T=new Map,S=[{id:j++,name:"Eikanya/Live2d-model",children:[],files:[]}];function L(){return S}function E(e){if(!S.includes(e))return Promise.resolve();if(!T.get(e)){const t=fetch(e.name.toLowerCase().replace("/","")+".json").then(e=>e.json()).then(t=>{e.name=t.models.name,e.children=t.models.children,e.files=t.models.files,$(e,e=>e.id=j++)});return T.set(e,t),t}return T.get(e)}function $(e,t){if(t(e),e.children)for(const i of e.children)$(i,t)}function P(e,t){const i=U(e);if(i){const e=encodeURI(i+"/"+t);return"https://cdn.jsdelivr.net/gh/"+e}}function D(e){const t=e.replace("https://cdn.jsdelivr.net/gh/",""),i=t.split("/"),o=i.slice(0,2).join("/"),n=i.slice(2).join("/");return`https://raw.githubusercontent.com/${o}/master/${n}`}function U(e){const t=i=>{for(const o of i){if(o===e)return o.name;if(o.children){const e=t(o.children);if(e)return o.name+"/"+e}}};return t(S)}S.forEach(E);var X=o["a"].extend({name:"ModelPicker",props:{value:Boolean},data:()=>({search:"",tree:L(),openedFolders:[],activeFolders:[],selectedFileIndex:-1,alert:""}),computed:{activeFolderFiles(){return this.activeFolders.length&&this.activeFolders[0].files||[]}},watch:{activeFolders(e,t){const i=0!==O()(e,t).length;i&&(this.selectedFileIndex=-1)},selectedFileIndex(){this.alert=""}},created(){},methods:{async fetchModels(e){var t,i;await E(e),(null===(t=e.files)||void 0===t?void 0:t.length)&&!(null===(i=e.children)||void 0===i?void 0:i.length)&&(e.children=[{id:Math.random(),name:""}])},folderOpened(e){const t=O()(e,this.openedFolders);t.length?(this.activeFolders=t.slice(0),this.openedFolders=e):this.activeFolders=this.tree.slice(0,1)},submit(){if(this.activeFolders.length&&this.selectedFileIndex>=0){const e=P(this.activeFolders[0],this.activeFolderFiles[this.selectedFileIndex]);e&&this.$emit("select",e)}this.$emit("input",!1)},log(...e){console.log(...e)}}}),B=X,N=(i("5fcb"),i("0798")),Y=i("8336"),z=i("62ad"),J=i("169a"),W=i("ce7e"),G=i("da13"),H=i("5d23"),q=i("1baa"),Z=i("2fa4"),K=i("71d9"),Q=i("2a7f"),ee=i("eb2a"),te=Object(d["a"])(B,k,C,!1,null,"7c720d4e",null),ie=te.exports;h()(te,{VAlert:N["a"],VBtn:Y["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["b"],VCol:z["a"],VDialog:J["a"],VDivider:W["a"],VIcon:f["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemGroup:q["a"],VListItemTitle:H["b"],VRow:w["a"],VSpacer:Z["a"],VToolbar:K["a"],VToolbarTitle:Q["a"],VTreeview:ee["a"]});var oe=o["a"].extend({components:{ModelPicker:ie},name:"ModelCreation",props:{value:Boolean},data:()=>({url:"",picker:{dialog:!1},urlRules:[e=>e.endsWith("model.json")||e.endsWith("model3.json")||"Model file must end with .model.json or .model3.json"]}),methods:{create(){this.url=this.url.replace(/\s/,""),this.urlRules.every(e=>e(this.url))&&(this.$live2dApp.addModel(this.url),this.$emit("input",!1))}}}),ne=oe,se=i("8654"),re=Object(d["a"])(ne,A,I,!1,null,"10519e64",null),le=re.exports;h()(re,{VBtn:Y["a"],VCard:v["a"],VCardText:p["b"],VDialog:J["a"],VIcon:f["a"],VRow:w["a"],VSpacer:Z["a"],VTextField:se["a"],VToolbar:K["a"],VToolbarTitle:Q["a"]});var ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.model?i("v-row",{staticClass:"ma-0"},[i("v-subheader",[e._v(e._s(e.model.name))]),i("v-col",{attrs:{cols:"12"}},[i("v-slider",{staticClass:"pb-0",attrs:{dense:"","prepend-icon":"mdi-magnify",messages:String(e.model.scaleX),min:"0.01",max:"3",step:"0.01"},model:{value:e.model.scaleX,callback:function(t){e.$set(e.model,"scaleX",t)},expression:"model.scaleX"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-slider",{staticClass:"pb-0",attrs:{dense:"","prepend-icon":"mdi-rotate-right",messages:e.rotationDeg,min:"0",max:"6.28",step:"0.01"},model:{value:e.model.rotation,callback:function(t){e.$set(e.model,"rotation",t)},expression:"model.rotation"}})],1)],1):e._e()},ce=[],de=o["a"].extend({name:"ModelEditor",props:{id:{type:Number,default:-1}},data:()=>({model:null}),computed:{rotationDeg(){var e;return Math.round(((null===(e=this.model)||void 0===e?void 0:e.rotation)||0)/Math.PI*180)+"°"}},watch:{id:{immediate:!0,handler(){this.updateModel()}},scaleX(e){this.model.scale(e,e)},rotation(e){this.model.rotate(e)}},methods:{updateModel(){this.model=this.$live2dApp.getModel(this.id)}}}),ue=de,he=i("ba0d"),ve=i("e0c7"),pe=Object(d["a"])(ue,ae,ce,!1,null,"a70516aa",null),fe=pe.exports;h()(pe,{VCol:z["a"],VRow:w["a"],VSlider:he["a"],VSubheader:ve["a"]});var me=o["a"].extend({name:"App",components:{ModelList:V,ModelCreation:le,ModelEditor:fe},data:()=>({drawer:!0,drawerSwitch:!1,loading:!1,modelList:{visible:!0},selectedModelID:-1,creation:{dialog:!1,result:null},models:[]}),computed:{},methods:{showUI(e){this.drawer=e,this.modelList.visible=e,this.drawerSwitch=!1},log(...e){console.log(...e)}},created(){this.models=this.$live2dApp.models,this.creation.dialog=!0}}),ge=me,be=(i("851b"),i("490c"),i("7496")),xe=i("a523"),we=i("f6c4"),Me=i("f774"),_e=Object(d["a"])(ge,n,s,!1,null,"2e1ee457",null),ye=_e.exports;h()(_e,{VApp:be["a"],VBtn:Y["a"],VContainer:xe["a"],VDivider:W["a"],VFabTransition:_["b"],VIcon:f["a"],VMain:we["a"],VNavigationDrawer:Me["a"],VSpacer:Z["a"],VToolbar:K["a"],VToolbarTitle:Q["a"]});var Fe=i("f309");o["a"].use(Fe["a"]);var Ve=new Fe["a"]({theme:{dark:!0,options:{customProperties:!0},themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),Ae=i("0949"),Ie=i("3e85"),ke=i("5e48"),Ce=i.n(ke);async function Re(e){try{return(await fetch(e)).ok}catch(t){return!1}}var Oe=i("aa81");async function je(e,t){e=Te(e,t);const i=Ce.a.parse(e);return i.url=t,await Se(i,t),Ee(i),console.log(i),i}function Te(e,t){for(const i of Le)t.includes(encodeURI(i.search))&&i.replace&&(e=i.replace(e,t));return e}async function Se(e,t){for(const i of Le)t.includes(encodeURI(i.search))&&i.patch&&await i.patch(e,t)}const Le=[{search:"碧蓝航线",patch(e){$e(e,["idle","home"])}},{search:"魂器学院",replace(e){return e.replace(/mtn"([^,])/gm,'mtn",$1')},patch(e){if(e.textures&&!Array.isArray(e.textures)){const t=Object.values(e.textures)[0];Array.isArray(t)&&(e.textures=t.map(e=>e.startsWith("textures/")?e:"textures/"+e))}}},{search:"少女前线",async patch(e,t){var i,o,n;if(null===(o=null===(i=e.motions)||void 0===i?void 0:i.idle)||void 0===o?void 0:o.length){const i=e.motions.idle[0];if(null===(n=i.file)||void 0===n?void 0:n.startsWith("daiji")){const e=await Re(Oe["url"].resolve(t,i.file));e||(i.file="motions/"+i.file)}}}},{search:"アンノウンブライド",async patch(e,t){var i,o;if(0===(null===(o=null===(i=e.FileReferences)||void 0===i?void 0:i.Textures)||void 0===o?void 0:o.length)){const i=await Re(Oe["url"].resolve(t,"textures/texture_00.png"));e.FileReferences.Textures.push(i?"textures/texture_00.png":"textures/texture_00 .png")}$e(e,["home","gacha"])}},{search:"少女咖啡枪",patch(e){$e(e,["stand"])}},{search:"凍京",async patch(e,t){var i,o,n,s,r;const l=async e=>await Re(Oe["url"].resolve(t,e))?e:e.replace("/texture","/android/texture");if(Ae["Cubism2ModelSettings"].isValidJSON(e)){if(e.textures&&(e.textures=await Promise.all(e.textures.map(l))),e.motions){for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.file=null!==(i=e.file)&&void 0!==i?i:e.File,delete e.File;!(null===(o=e.motions.idle)||void 0===o?void 0:o.length)&&e.motions[""]&&(e.motions.idle=e.motions[""].filter(e=>{var t;return null===(t=e.file)||void 0===t?void 0:t.includes("loop")}))}}else Ae["Cubism4ModelSettings"].isValidJSON(e)&&((null===(n=e.FileReferences)||void 0===n?void 0:n.Textures)&&(e.FileReferences.Textures=await Promise.all(e.FileReferences.Textures.map(l))),(null===(s=e.FileReferences)||void 0===s?void 0:s.Motions)&&!(null===(r=e.FileReferences.Motions.Idle)||void 0===r?void 0:r.length)&&e.FileReferences.Motions[""]&&(e.FileReferences.Motions.Idle=e.FileReferences.Motions[""].filter(e=>{var t;return null===(t=e.File)||void 0===t?void 0:t.includes("loop")})))}},{search:"天命之子",patch(e){var t,i,o,n,s;(null===(i=null===(t=e.motions)||void 0===t?void 0:t[""])||void 0===i?void 0:i.length)&&!(null===(n=null===(o=e.motions)||void 0===o?void 0:o.idle)||void 0===n?void 0:n.length)&&(e.motions.idle=null===(s=e.motions)||void 0===s?void 0:s[""].map(e=>Object.assign({},e)))}},{search:"崩坏",patch(e){Pe(e)}},{search:"战舰少女",patch(e){Pe(e)}},{search:"机动战队",patch(e){Pe(e)}}];function Ee(e){var t,i,o;const n=null===(t=e.FileReferences)||void 0===t?void 0:t.Motions;n&&((null===(i=n.Idle)||void 0===i?void 0:i[0])||1!==(null===(o=n[""])||void 0===o?void 0:o.length)||(n.Idle=n[""].map(e=>Object.assign({},e))))}function $e(e,t){var i;if(null===(i=e.FileReferences)||void 0===i?void 0:i.Motions){const i=[];for(const[o,n]of Object.entries(e.FileReferences.Motions))if("Idle"!==o&&Array.isArray(n))for(const e of n)for(const o of t)e.File&&e.File.toLowerCase().includes(o)&&i.push(e);i&&(e.FileReferences.Motions.Idle=(e.FileReferences.Motions.Idle||[]).concat(i))}}function Pe(e){if(e.motions)for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.sound=void 0}class De extends Ae["Live2DModel"]{constructor(){super(),this.once("modelLoaded",this._init)}_init(){var e,t;this.hitAreaFrames=new Ie["a"],this.addChild(this.hitAreaFrames),this.anchor.set(.5,.5),this.on("hit",this.startHitMotion),null===(t=(e=this.internalModel.motionManager.queueManager).setEventCallback)||void 0===t||t.call(e,(e,t)=>{this.emit("motion:"+t)})}startHitMotion(e){for(let t of e){t=t.toLowerCase();const e=[t,"tap"+t,"tap_"+t,"tap"];for(const t of e)for(let e of Object.keys(this.internalModel.motionManager.definitions))if(t===e.toLowerCase())return void this.motion(e)}}}function Ue(e){const t=e;t.buttonMode=!0,t.on("pointerdown",Xe),t.on("pointermove",Be),t.on("pointerup",Ne),t.on("pointerupoutside",Ne)}function Xe(e){this.dragging=!0,this._pointerX=e.data.global.x-this.x,this._pointerY=e.data.global.y-this.y}function Be(e){this.dragging&&(this.position.x=e.data.global.x-this._pointerX,this.position.y=e.data.global.y-this._pointerY)}function Ne(e){this.dragging=!1}De.from=async e=>{const t=await fetch(e).then(e=>e.text()),i=await je(t,e);return Ae["Live2DModel"].from.call(De,i)};const Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU22h6EgADqAHHuWdgTgAAAABJRU5ErkJggg==";let ze=0;class Je extends Oe["EventEmitter"]{constructor(e){super(),this.id=ze++,this.url="",this.thumbnail="",this.aspectRatio=1,this.name="New Model",this.visible=!0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._zIndex=0,this.error="",this.url=e,this.loadModel().then()}async loadModel(){const e=e=>{this.error=e instanceof Error?e.message:e+""};try{this.pixiModel=await De.from(this.url)}catch(t){403===t.status?this.url=D(this.url):e(t)}this.pixiModel||(this.pixiModel=await De.from(this.url).catch(e)),this.pixiModel&&(this.initModel(this.pixiModel),this.emit("modelLoaded",this.pixiModel))}initModel(e){this.pixiModel=e,this.name=e.internalModel.settings.name,this.thumbnail=Ye,this.aspectRatio=e.width/e.height,Ue(e)}fit(e,t){if(this.pixiModel){const i=Math.min(e/this.pixiModel.width,t/this.pixiModel.height);this.scale(i,i)}}scale(e,t){this._scaleX=null!==e&&void 0!==e?e:this._scaleX,this._scaleY=null!==t&&void 0!==t?t:this._scaleY,this.pixiModel&&this.pixiModel.scale.set(this._scaleX,this._scaleY)}rotate(e){this._rotation=e,this.pixiModel&&(this.pixiModel.rotation=e)}setZIndex(e){this._zIndex=e,this.pixiModel&&(this.pixiModel.zIndex=e)}setVisible(e){this.visible=e,this.pixiModel&&(this.pixiModel.visible=e)}destroy(){this.pixiModel&&this.pixiModel.destroy({children:!0})}get zIndex(){return this._zIndex}set zIndex(e){this.setZIndex(e)}get rotation(){return this._rotation}set rotation(e){this.rotate(e)}get scaleY(){return this._scaleY}set scaleY(e){this.scale(void 0,e)}get scaleX(){return this._scaleX}set scaleX(e){this.scale(e,e)}}var We=i("568e"),Ge=i("c29d"),He=i("e3e9"),qe=i("6129"),Ze=i("9bfd"),Ke=i("b0a0");We["a"].registerPlugin(He["b"]),De.registerTicker(He["a"]),Ge["Renderer"].registerPlugin("extract",Ze["a"]),Ge["Renderer"].registerPlugin("batch",Ge["BatchRenderer"]),Ge["Renderer"].registerPlugin("interaction",qe["a"]),Ae["config"].logLevel=Ae["config"].LOG_LEVEL_VERBOSE;class Qe{constructor(e){this.models=[],this.pixiApp=new We["a"]({view:e,resizeTo:window}),this.pixiApp.stage.interactive=!0}addModel(e){const t=new Je(e);return this.initModel(t),this.models.push(t),t.id}getModel(e){return this.models.find(t=>t.id===e)}initModel(e){e.on("modelLoaded",t=>{this.pixiApp.stage.children.includes(t)||(this.pixiApp.stage.addChild(t),t.position.set(this.pixiApp.renderer.width/2,this.pixiApp.renderer.height/2),e.fit(this.pixiApp.renderer.width,this.pixiApp.renderer.height),e.thumbnail=this.createThumbnail(t))})}createThumbnail(e){Ke["b"].RESOLUTION=.2;const t=this.pixiApp.renderer.extract.base64(e,"image/webp",.01);return Ke["b"].RESOLUTION=1,t}destroyModel(e){const t=this.models.find(t=>t.id===e);t&&(t.destroy(),t.pixiModel&&this.pixiApp.stage.removeChild(t.pixiModel))}}const et=new Qe(document.getElementById("canvas"));o["a"].prototype.$live2dApp=et,o["a"].config.productionTip=!1,o["a"].directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"})),window.app=new o["a"]({vuetify:Ve,render:e=>e(ye)}).$mount("#app"),window.config=Ae["config"]},e20d:function(e,t,i){}});
//# sourceMappingURL=app.5f6abd37.js.map