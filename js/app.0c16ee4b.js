(function(e){function t(t){for(var o,r,a=t[0],l=t[1],d=t[2],u=0,h=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);c&&c(t);while(h.length)h.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],o=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},s={app:0},n=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var d=0;d<a.length;d++)t(a[d]);var c=l;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"0f52":function(e,t,i){"use strict";i("41cc")},2309:function(e,t,i){},"30ef":function(e,t,i){"use strict";i("d016")},3106:function(e,t,i){"use strict";i("4017")},3638:function(e,t,i){"use strict";i("cc73")},4017:function(e,t,i){},"41cc":function(e,t,i){},"490c":function(e,t,i){"use strict";i("2309")},"49c2":function(e,t,i){},"6d4b":function(e,t,i){"use strict";i("985a")},"985a":function(e,t,i){},a339:function(e,t,i){"use strict";i("49c2")},ae0e:function(e,t,i){},b49c:function(e,t,i){"use strict";i("ae0e")},cc73:function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);var o=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-navigation-drawer",{attrs:{absolute:"",width:e.drawerWidth},on:{transitionend:function(t){!e.drawer&&(e.drawerSwitch=!0)}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("v-toolbar",{attrs:{color:"primary"}},[i("v-toolbar-title",[e._v("Live2D Viewer")]),i("v-spacer"),i("v-btn-toggle",{attrs:{group:"",rounded:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[e._v("mdi-cog")])],1)],1),i("v-btn",{staticClass:"ml-1",attrs:{icon:""},on:{click:function(t){return e.showUI(!1)}}},[i("v-icon",[e._v("mdi-close")])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.tab,expression:"tab===undefined"}],staticClass:"model-page"},[i("div",{staticClass:"header pa-3"},[i("div",{staticClass:"d-flex align-center"},[i("div",{staticClass:"text-h4"},[e._v(e._s("#"+e.selectedModelID))]),i("v-spacer"),i("v-btn",{staticClass:"mr-n3",attrs:{icon:"",width:"48",height:"48"},on:{click:function(t){e.creation.dialog=!0}}},[i("v-icon",[e._v("mdi-plus")])],1)],1),i("v-tooltip",{attrs:{top:"",disabled:!e.selectedModelID},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[i("div",e._g(e._b({class:["model-name mt-2 text-h5",{valid:e.selectedModelID}],on:{click:function(t){e.selectedModelID&&(e.modelInfoDialog=!0)}}},"div",s,!1),o),[e._v(" "+e._s(e.selectedModelID?e.modelName:"Press + to create a model")+" ")])]}}])},[e._v(" Show info ")])],1),i("v-divider"),i("ModelEditor",{attrs:{id:e.selectedModelID,visible:e.drawer&&void 0===e.tab}})],1),i("Settings",{directives:[{name:"show",rawName:"v-show",value:0===e.tab,expression:"tab===0"}]})],1),i("v-main",{style:{paddingLeft:e.drawerWidth+"px !important"}},[i("v-container",{staticClass:"pa-0 fill-height flex-column",attrs:{fluid:""}},[i("v-spacer"),i("ModelList",{attrs:{show:e.modelList.visible},model:{value:e.selectedModelID,callback:function(t){e.selectedModelID=t},expression:"selectedModelID"}})],1),i("ModelCreation",{on:{create:function(t){e.selectedModelID=t}},model:{value:e.creation.dialog,callback:function(t){e.$set(e.creation,"dialog",t)},expression:"creation.dialog"}}),i("ModelInfo",{attrs:{id:e.selectedModelID},model:{value:e.modelInfoDialog,callback:function(t){e.modelInfoDialog=t},expression:"modelInfoDialog"}})],1),i("v-fab-transition",[i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.drawerSwitch,expression:"drawerSwitch"}],attrs:{fab:"",top:"",left:"",absolute:"",dark:"",color:"accent"},on:{click:function(t){return e.showUI(!0)}}},[i("v-icon",[e._v("mdi-plus")])],1)],1),i("DropZone",{on:{error:e.error}}),i("v-snackbar",{attrs:{timeout:e.snackbar.timeout},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[i("v-btn",e._b({attrs:{icon:""},on:{click:function(t){e.snackbar.visible=!1}}},"v-btn",o,!1),[i("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" "+e._s(e.snackbar.message)+" ")])],1)},n=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-slide-y-reverse-transition",[e.show&&e.models.length?i("v-sheet",{staticClass:"model-list",attrs:{width:"100%"}},[i("v-item-group",{staticClass:"flex-grow-1",attrs:{mandatory:"",value:e.selectedIndex},on:{change:e.select}},[i("transition-group",{staticClass:"model-group d-flex pa-2",attrs:{name:"move"}},e._l(e.models,(function(t,o){return i("v-item",{key:t.id,scopedSlots:e._u([{key:"default",fn:function(o){var s=o.active,n=o.toggle;return[i("v-card",{staticClass:"ma-2",attrs:{color:t.error?"#631f1f":s?"grey darken-2":"grey darken-3"},on:{click:n}},[i("v-tooltip",{attrs:{top:"",disabled:!t.error},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on,r=o.attrs;return[i("v-img",e._g(e._b({attrs:{src:t.thumbnail,width:t.error?192:192*t.aspectRatio,height:"192"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t.error?i("v-icon",[e._v("mdi-alert-circle")]):i("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},"v-img",r,!1),n),[i("v-card-title",{staticClass:"ml-1 pa-0 flex-nowrap subtitle-1"},[i("span",{staticClass:"model-item-title text-truncate"},[e._v(e._s("#"+t.id+" "+t.name))]),i("v-spacer"),s?i("v-btn",{attrs:{icon:""},on:{click:function(i){return i.stopPropagation(),e.remove(t.id)}}},[i("v-icon",{attrs:{size:"20"}},[e._v("mdi-close")])],1):e._e()],1)],1)]}}],null,!0)},[e._v(" "+e._s(t.error)+" ")])],1)]}}],null,!0)})})),1)],1)],1):e._e()],1)},a=[],l=i("9ab4"),d=i("0949"),c=i("3e85"),u=i("7eaa"),h=i("c29d"),v=i("e3e9"),m=i("5e48"),p=i.n(m);async function f(e){try{return(await fetch(e)).ok}catch(t){return!1}}var g=i("8718"),b=i.n(g),x=i("efdf"),w=i.n(x),M=i("aa81");function y(e){return e.endsWith("model.json")}function _(e){return e.endsWith("model3.json")}function k(e){return y(e)||_(e)}function F(e){return e.endsWith(".moc")}function I(e){return e.endsWith(".moc3")}function S(e){return F(e)||I(e)}let C=0;const V="https://cdn.jsdelivr.net/gh/",L=new Map,A=[{id:C++,name:"Eikanya/Live2d-model",children:[],files:[]}],E={};function O(){return A}function R(e){if(!A.includes(e))return Promise.resolve();if(!L.get(e)){const t=fetch(e.name.toLowerCase().replace("/","")+".json").then(e=>e.json()).then(t=>{e.name=t.models.name,e.children=t.models.children,e.files=t.models.files,D(e,e=>e.id=C++),Object.assign(E,t.settings)});return L.set(e,t),t}return L.get(e)}function D(e,t){if(t(e),e.children)for(const i of e.children)D(i,t)}function T(e,t){const i=j(e);if(i){let e=encodeURI(i+"/"+t);const o=e.indexOf("/",e.indexOf("/")+1);return e=e.slice(0,o)+"@master"+e.slice(o),V+e}}function j(e){const t=i=>{for(const o of i){if(o===e)return o.name;if(o.children){const e=t(o.children);if(e)return o.name+"/"+e}}};return t(A)}function P(e){if(!k(e)&&!e.endsWith(".zip")){if(S(e)){if($(e))return;return"Error: Cannot display a moc file that doesn't belong to any resource repository"}return"Warning: Unknown URL type. The model may not be loaded correctly"}}function $(e){if(e.startsWith(V)){let t=e.replace(V,"");return t=t.replace("@master",""),t=decodeURI(t),E[t]}}A.forEach(R),d["Live2DFactory"].live2DModelMiddlewares.splice(d["Live2DFactory"].live2DModelMiddlewares.indexOf(d["Live2DFactory"].urlToJSON),1,N);const U=d["InternalModel"].prototype.init;async function N(e,t){var i,o,s,n;if("string"===typeof e.source){const t=e.source;let r;if(S(t)){if(r=$(t),!r)throw new Error("Cannot find settings JSON from moc");if(I(t)){r.url=M["url"].resolve(t,"dummy.model3.json");const e=r;e.FileReferences.Moc=t,(null===(o=null===(i=e.FileReferences.Motions)||void 0===i?void 0:i[""])||void 0===o?void 0:o.length)&&"string"===typeof e.FileReferences.Motions[""][0]&&(e.FileReferences.Motions[""]=e.FileReferences.Motions[""].map(e=>({File:e})))}else{r.url=M["url"].resolve(t,"dummy.model.json");const e=r;e.model=t,(null===(n=null===(s=e.motions)||void 0===s?void 0:s[""])||void 0===n?void 0:n.length)&&"string"===typeof e.motions[""][0]&&(e.motions[""]=e.motions[""].map(e=>({file:e})))}}else{let e=await fetch(t).then(e=>e.text());e=B(e,t),r=p.a.parse(e),r.url=t}await H(r,t),z(r),e.source=r,console.log(r),e.live2dModel.emit("settingsJSONLoaded",r)}return t()}function B(e,t){for(const i of G)t.includes(encodeURI(i.search))&&i.replace&&(e=i.replace(e,t));return e}async function H(e,t){for(const i of G)t.includes(encodeURI(i.search))&&i.patch&&await i.patch(e,t)}async function W(e){for(const t of G)e.settings.url.includes(encodeURI(t.search))&&t.patchInternalModel&&await t.patchInternalModel(e)}d["InternalModel"].prototype.init=async function(){await W(this),U.call(this)};const G=[{search:"魂器学院",replace(e){return e.replace(/mtn"([^,])/gm,'mtn",$1')},patch(e){if(e.textures&&!Array.isArray(e.textures)){const t=Object.values(e.textures)[0];Array.isArray(t)&&(e.textures=t.map(e=>e.startsWith("textures/")?e:"textures/"+e))}}},{search:"少女前线",async patch(e,t){var i,o,s;if(J(e,["daiji"]),null===(o=null===(i=e.motions)||void 0===i?void 0:i.idle)||void 0===o?void 0:o.length){const i=e.motions.idle[0];if(null===(s=i.file)||void 0===s?void 0:s.startsWith("daiji")){const e=await f(M["url"].resolve(t,i.file));e||(i.file="motions/"+i.file)}}}},{search:"アンノウンブライド",async patch(e,t){var i,o;if(0===(null===(o=null===(i=e.FileReferences)||void 0===i?void 0:i.Textures)||void 0===o?void 0:o.length)){const i=await f(M["url"].resolve(t,"textures/texture_00.png"));e.FileReferences.Textures.push(i?"textures/texture_00.png":"textures/texture_00 .png")}X(e,["home","gacha"])}},{search:"凍京",async patch(e,t){var i,o,s,n,r;const a=async e=>await f(M["url"].resolve(t,e))?e:e.replace("/texture","/android/texture");if(d["Cubism2ModelSettings"].isValidJSON(e)){if(e.textures&&(e.textures=await Promise.all(e.textures.map(a))),e.motions){for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.file=null!==(i=e.file)&&void 0!==i?i:e.File,delete e.File;!(null===(o=e.motions.idle)||void 0===o?void 0:o.length)&&e.motions[""]&&(e.motions.idle=e.motions[""].filter(e=>{var t;return null===(t=e.file)||void 0===t?void 0:t.includes("loop")}))}}else d["Cubism4ModelSettings"].isValidJSON(e)&&((null===(s=e.FileReferences)||void 0===s?void 0:s.Textures)&&(e.FileReferences.Textures=await Promise.all(e.FileReferences.Textures.map(a))),(null===(n=e.FileReferences)||void 0===n?void 0:n.Motions)&&!(null===(r=e.FileReferences.Motions.Idle)||void 0===r?void 0:r.length)&&e.FileReferences.Motions[""]&&(e.FileReferences.Motions.Idle=e.FileReferences.Motions[""].filter(e=>{var t;return null===(t=e.File)||void 0===t?void 0:t.includes("loop")})))}},{search:"天命之子",patch(e){var t,i,o,s,n;(null===(i=null===(t=e.motions)||void 0===t?void 0:t[""])||void 0===i?void 0:i.length)&&!(null===(s=null===(o=e.motions)||void 0===o?void 0:o.idle)||void 0===s?void 0:s.length)&&(e.motions.idle=null===(n=e.motions)||void 0===n?void 0:n[""].map(e=>Object.assign({},e)))}},{search:"碧蓝航线",patch(e){X(e,["idle"])}},{search:"少女咖啡枪",patch(e){X(e,["stand"])},patchInternalModel(e){for(const t of Object.keys(e))t.startsWith("idParam")&&(e[t]=w()(e[t]).toUpperCase())}},{search:"princesses",patch(e){J(e,["default","loop"])}},{search:"崩坏",patch(e){Y(e)}},{search:"战舰少女",patch(e){Y(e)}},{search:"机动战队",patch(e){Y(e)}}];function z(e){var t,i,o;const s=null===(t=e.FileReferences)||void 0===t?void 0:t.Motions;s&&((null===(i=s.Idle)||void 0===i?void 0:i[0])||1!==(null===(o=s[""])||void 0===o?void 0:o.length)||(s.Idle=s[""].map(e=>Object.assign({},e))))}function J(e,t){if(e.motions){const i=[];for(const[o,s]of Object.entries(e.motions))if("idle"!==o&&Array.isArray(s))for(const e of s)for(const o of t)e.file&&e.file.toLowerCase().includes(o)&&i.push(e);i.length&&(e.motions.idle=b()(e.motions.idle,i,"file"))}}function X(e,t){var i;if(null===(i=e.FileReferences)||void 0===i?void 0:i.Motions){const i=[];for(const[o,s]of Object.entries(e.FileReferences.Motions))if("Idle"!==o&&Array.isArray(s))for(const e of s)for(const o of t)e.File&&e.File.toLowerCase().includes(o)&&i.push(e);i.length&&(e.FileReferences.Motions.Idle=b()(e.FileReferences.Motions.Idle,i,"File"))}}function Y(e){if(e.motions)for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.sound=void 0}var Z=i("c4e3"),q=i.n(Z);d["ZipLoader"].zipReader=(e,t)=>q.a.loadAsync(e),d["ZipLoader"].readText=(e,t)=>{const i=e.file(t);if(!i)throw new Error("Cannot find file: "+t);return i.async("text")},d["ZipLoader"].getFilePaths=e=>{const t=[];return e.forEach(e=>t.push(e)),Promise.resolve(t)},d["ZipLoader"].getFiles=(e,t)=>Promise.all(t.map(async t=>{const i=t.slice(t.lastIndexOf("/")+1),o=await e.file(t).async("blob");return new File([o],i)}));var K,Q=i("00d7"),ee=i("9abc"),te=i("6184"),ie=i("cc7a"),oe=i("c856"),se=i("eb82");(function(e){function t(t,i){t.filters=[];for(const o of i)t.filters.push(e.filters[o])}function i(t){e.filters.Noise.seed=Math.random(),e.filters.CRT.seed=Math.random(),e.filters.CRT.time+=.01*t}function o(e){e.filters=[]}e.filters={Outline:new ee["a"](4),Pixelate:new Q["a"](4),CRT:new oe["a"]({lineWidth:3,lineContrast:.3,vignetting:0}),Noise:new se["a"](.4),Ascii:new te["a"],Alpha:new ie["a"](.7)},e.set=t,e.update=i,e.release=o})(K||(K={})),d["Live2DModel"].registerTicker(v["a"]);class ne extends d["Live2DModel"]{constructor(){super(),this.backgroundVisible=!1,this.currentMotionStartTime=performance.now(),this.currentMotionDuration=0,this.hitAreaFrames=new c["a"],this.hitAreaFrames.visible=!1,this.background=u["a"].from(h["Texture"].WHITE),this.background.alpha=.2,this.background.visible=!1,this.once("modelLoaded",this._init)}_init(){this.addChild(this.hitAreaFrames),this.addChild(this.background),this.background.width=this.internalModel.width,this.background.height=this.internalModel.height,this.anchor.set(.5,.5),this.on("hit",this.startHitMotion),this.internalModel.motionManager.on("motionStart",(e,t)=>{var i;this.currentMotionStartTime=this.elapsedTime,this.currentMotionDuration=0;const o=null===(i=this.internalModel.motionManager.motionGroups[e])||void 0===i?void 0:i[t];o&&("_loopDurationSeconds"in o?this.currentMotionDuration=1e3*o._loopDurationSeconds:"getDurationMSec"in o&&(this.currentMotionDuration=o.getDurationMSec()))});const e=this.internalModel.motionManager.expressionManager;if(e){const t=e.startMotion;e.startMotion=i=>{t.call(e,i),this.emit("expressionSet",e.expressions.indexOf(i))};let i=e.reserveExpressionIndex;Object.defineProperty(e,"reserveExpressionIndex",{get:()=>i,set:e=>{i=e,this.emit("expressionReserved",e)}})}}startHitMotion(e){for(let t of e){t=t.toLowerCase();const e=[t,"tap"+t,"tap_"+t,"tap"];for(const t of e)for(let e of Object.keys(this.internalModel.motionManager.definitions))if(t===e.toLowerCase())return void this.motion(e)}}updateTransform(){super.updateTransform(),this.backgroundVisible&&this.background.updateTransform()}_render(e){this.backgroundVisible&&(this.background.visible=!0,this.background.render(e),this.background.visible=!1),super._render(e)}destroy(e){super.destroy(e),K.release(this)}}function re(e){const t=e;t.on("pointerdown",ae),t.on("pointermove",le),t.on("pointerup",de),t.on("pointerupoutside",de)}function ae(e){this.dragging=!0,this._pointerX=e.data.global.x-this.x,this._pointerY=e.data.global.y-this.y}function le(e){this.dragging&&(this.position.x=e.data.global.x-this._pointerX,this.position.y=e.data.global.y-this._pointerY)}function de(e){this.dragging=!1}var ce=i("b0a0");const ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU22h6EgADqAHHuWdgTgAAAABJRU5ErkJggg==";let he=1;class ve extends M["EventEmitter"]{constructor(e,t){super(),this.id=he++,this.url="",this.thumbnail="",this.aspectRatio=1,this.name="New Model",this.visible=!0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._zIndex=0,this.filters=[],this.error="",this.loadModel(e).then()}async loadModel(e){this.url="string"===typeof e?e:"(Local files)";try{this.pixiModel=await ne.from(e)}catch(t){console.warn(t),this.error=t instanceof Error?t.message:t+""}this.pixiModel&&(this.initModel(this.pixiModel),this.emit("modelLoaded",this.pixiModel))}initModel(e){this.pixiModel=e,this.name=e.internalModel.settings.name,this.thumbnail=ue,this.aspectRatio=e.width/e.height,this.updateFilters(),re(e)}initThumbnail(e){const t=this.pixiModel;ce["b"].RESOLUTION=.2;const i=t.hitAreaFrames.visible,o=t.backgroundVisible;t.hitAreaFrames.visible=!1,t.backgroundVisible=!1;try{const i=e.extract.canvas(t);i.toBlob(e=>this.thumbnail=URL.createObjectURL(e),"image/webp",.01)}catch(s){console.warn(s)}ce["b"].RESOLUTION=1,t.hitAreaFrames.visible=i,t.backgroundVisible=o}fit(e,t){if(this.pixiModel){let i=Math.min(e/this.pixiModel.width,t/this.pixiModel.height);i=Math.round(10*i)/10,this.scale(i,i)}}scale(e,t){this._scaleX=null!==e&&void 0!==e?e:this._scaleX,this._scaleY=null!==t&&void 0!==t?t:this._scaleY,this.pixiModel&&this.pixiModel.scale.set(this._scaleX,this._scaleY)}rotate(e){this._rotation=e,this.pixiModel&&(this.pixiModel.rotation=e)}setZIndex(e){this._zIndex=e,this.pixiModel&&(this.pixiModel.zIndex=e)}setVisible(e){this.visible=e,this.pixiModel&&(this.pixiModel.visible=e)}updateFilters(){this.pixiModel&&K.set(this.pixiModel,this.filters)}destroy(){this.pixiModel&&(this.pixiModel.destroy({children:!0}),this.pixiModel=void 0,URL.revokeObjectURL(this.thumbnail))}get zIndex(){return this._zIndex}set zIndex(e){this.setZIndex(e)}get rotation(){return this._rotation}set rotation(e){this.rotate(e)}get scaleY(){return this._scaleY}set scaleY(e){this.scale(void 0,e)}get scaleX(){return this._scaleX}set scaleX(e){this.scale(e,e)}}function me(e){return function(t,i,o){const s=o.set;o.set=function(t){s.call(this,t),pe(e,t)};const n=fe(e,o.get.call(t));s.call(t,n)}}function pe(e,t){localStorage.setItem(e,JSON.stringify(t))}function fe(e,t){const i=localStorage.getItem(e);return null===i?t:JSON.parse(i)}var ge=i("3191"),be=i.n(ge),xe=i("568e"),we=i("9bfd"),Me=i("6129");xe["a"].registerPlugin(v["b"]),h["Renderer"].registerPlugin("extract",we["a"]),h["Renderer"].registerPlugin("batch",h["BatchRenderer"]),h["Renderer"].registerPlugin("interaction",Me["a"]);class ye extends xe["a"]{constructor(e){super({view:document.getElementById("canvas"),resizeTo:window,antialias:!0,transparent:!0}),this.ticker.remove(this.render,this),this.ticker.add(()=>{e.begin(),K.update(this.ticker.deltaMS),this.render(),e.end()})}}const _e=new be.a;_e.showPanel(0),_e.dom.style.left="",_e.dom.style.right="0";class ke{static addModel(e){const t=new ve(e,this.pixiApp.renderer);return this.initModel(t),this.models.push(t),t.id}static getModel(e){return this.models.find(t=>t.id===e)}static initModel(e){e.on("modelLoaded",async t=>{this.pixiApp.stage.children.includes(t)||(this.pixiApp.stage.addChild(t),t.backgroundVisible=this.showModelFrame,t.hitAreaFrames.visible=this.showHitAreaFrames,t.position.set(this.pixiApp.renderer.width/2,this.pixiApp.renderer.height/2),e.fit(this.pixiApp.renderer.width,this.pixiApp.renderer.height),e.initThumbnail(this.pixiApp.renderer))})}static removeModel(e){const t=this.models.find(t=>t.id===e);t&&(this.models.splice(this.models.indexOf(t),1),t.pixiModel&&this.pixiApp.stage.removeChild(t.pixiModel),t.destroy())}static set showStats(e){var t;this._showStats=e,e?document.body.appendChild(_e.dom):null===(t=_e.dom.parentElement)||void 0===t||t.removeChild(_e.dom)}static get showStats(){return this._showStats}static set volume(e){this._volume=e,d["SoundManager"].volume=e}static get volume(){return this._volume}static set showModelFrame(e){this._showModelFrame=e;for(const t of this.models)(null===t||void 0===t?void 0:t.pixiModel)&&(t.pixiModel.backgroundVisible=e)}static get showModelFrame(){return this._showModelFrame}static set showHitAreaFrames(e){this._showHitAreaFrames=e;for(const t of this.models)(null===t||void 0===t?void 0:t.pixiModel)&&(t.pixiModel.hitAreaFrames.visible=e)}static get showHitAreaFrames(){return this._showHitAreaFrames}}ke.models=[],ke.pixiApp=new ye(_e),ke._volume=d["SoundManager"].volume,ke._showHitAreaFrames=!0,ke._showModelFrame=!1,ke._showStats=!0,Object(l["a"])([me("stats")],ke,"showStats",null),Object(l["a"])([me("volume")],ke,"volume",null),Object(l["a"])([me("modelFrame")],ke,"showModelFrame",null),Object(l["a"])([me("hitAreaFrames")],ke,"showHitAreaFrames",null);var Fe=o["a"].extend({name:"ModelList",props:{value:Number,show:Boolean},data:()=>({models:[]}),computed:{selectedIndex(){return this.models.findIndex(e=>e.id===this.value)}},created(){this.models=ke.models},methods:{select(e){var t,i;const o=null!==(i=null===(t=this.models[e])||void 0===t?void 0:t.id)&&void 0!==i?i:0;this.$emit("input",o)},remove(e){1===this.models.length&&this.$emit("input",0),ke.removeModel(e)}}}),Ie=Fe,Se=(i("a339"),i("2877")),Ce=i("6544"),Ve=i.n(Ce),Le=i("8336"),Ae=i("b0af"),Ee=i("99d9"),Oe=i("132d"),Re=i("adda"),De=i("d903"),Te=i("604c"),je=i("490a"),Pe=i("0fd9"),$e=i("8dd9"),Ue=i("0789"),Ne=i("2fa4"),Be=i("3a2f"),He=Object(Se["a"])(Ie,r,a,!1,null,"2f176a82",null),We=He.exports;Ve()(He,{VBtn:Le["a"],VCard:Ae["a"],VCardTitle:Ee["c"],VIcon:Oe["a"],VImg:Re["a"],VItem:De["a"],VItemGroup:Te["b"],VProgressCircular:je["a"],VRow:Pe["a"],VSheet:$e["a"],VSlideYReverseTransition:Ue["f"],VSpacer:Ne["a"],VTooltip:Be["a"]});var Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"800"},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"primary",flat:"",dense:""}},[i("v-toolbar-title",[e._v("Create Model")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:e.create}},[i("v-icon",[e._v("mdi-checkbox-marked-circle-outline")])],1)],1),i("v-card-text",{staticClass:"pa-8"},[i("v-text-field",{attrs:{"single-line":"",filled:"",label:"URL",messages:e.urlMessages,error:e.urlError},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),i("div",{staticClass:"d-flex align-center"},[i("v-btn",{attrs:{icon:"",small:"",color:"grey"},on:{click:function(t){e.dropHelpDialog=!0}}},[i("v-icon",{attrs:{size:"20"}},[e._v("mdi-help-circle")])],1),i("span",[e._v("Drag and drop supported")]),i("v-spacer"),i("v-btn",{attrs:{color:"blue-grey"},on:{click:function(t){e.picker.dialog=!0}}},[e._v("From source..."),i("v-icon",{attrs:{right:""}},[e._v(" mdi-cloud-search")])],1)],1)],1)],1),i("v-dialog",{attrs:{width:"1000","max-width":"80vw"},model:{value:e.dropHelpDialog,callback:function(t){e.dropHelpDialog=t},expression:"dropHelpDialog"}},[i("v-img",{attrs:{src:"drop.jpg"},on:{click:function(t){e.dropHelpDialog=!1}}})],1),i("ModelPicker",{on:{select:function(t){e.url=t}},model:{value:e.picker.dialog,callback:function(t){e.$set(e.picker,"dialog",t)},expression:"picker.dialog"}})],1)},ze=[],Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.value,width:"1500","max-width":"90vw"},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",{staticClass:"d-flex flex-column",attrs:{height:"1000","max-height":"90vh"}},[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"primary",flat:"",dense:""}},[i("v-toolbar-title",[e._v("Select a Model")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:e.submit}},[i("v-icon",[e._v("mdi-checkbox-marked-circle-outline")])],1)],1),i("v-row",{staticClass:"content-row flex-grow-1",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"content-col"},[i("v-card-text",[i("v-treeview",{attrs:{activatable:"","return-object":"","load-children":e.fetchModels,active:e.activeFolders,items:e.tree,"item-key":"id","open-on-click":""},on:{"update:active":function(t){t.length&&(e.activeFolders=t)},"update:open":e.folderOpened},scopedSlots:e._u([{key:"prepend",fn:function(t){var o=t.open;return[i("v-icon",[e._v(" "+e._s(o?"mdi-folder-open":"mdi-folder")+" ")])]}}])})],1)],1),i("v-divider",{attrs:{vertical:""}}),i("v-col",{staticClass:"content-col"},[i("v-card-text",[i("v-list-item-group",{model:{value:e.selectedFileIndex,callback:function(t){e.selectedFileIndex=t},expression:"selectedFileIndex"}},e._l(e.activeFolderFiles,(function(t,o){return i("v-list-item",{key:t,attrs:{color:"primary"},nativeOn:{dblclick:function(t){e.selectedFileIndex=o,e.submit()}}},[i("v-list-item-content",[i("v-list-item-title",[e._v(e._s(t))])],1)],1)})),1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("span",{staticClass:"text--secondary"},[e._v("The listed models were scraped from "),i("a",{attrs:{target:"_blank",href:"https://github.com/Eikanya/Live2d-model"}},[e._v("Eikanya/Live2d-model")]),e._v(". All credit goes to their respective creators.")]),i("v-alert",{directives:[{name:"visible",rawName:"v-visible",value:e.alert,expression:"alert"}],staticClass:"mb-0",attrs:{dense:"",text:"",type:"error"}},[e._v(e._s(e.alert))])],1)],1)],1)},Xe=[],Ye=i("41c6"),Ze=i.n(Ye),qe=o["a"].extend({name:"ModelPicker",props:{value:Boolean},data:()=>({search:"",tree:O(),openedFolders:[],activeFolders:[],selectedFileIndex:-1,alert:""}),computed:{activeFolderFiles(){return this.activeFolders.length&&this.activeFolders[0].files||[]}},watch:{activeFolders(e,t){const i=0!==Ze()(e,t).length;i&&(this.selectedFileIndex=-1)},selectedFileIndex(){this.alert=""}},created(){},methods:{async fetchModels(e){var t,i;await R(e),(null===(t=e.files)||void 0===t?void 0:t.length)&&!(null===(i=e.children)||void 0===i?void 0:i.length)&&(e.children=[{id:Math.random(),name:""}])},folderOpened(e){const t=Ze()(e,this.openedFolders);t.length?(this.activeFolders=t.slice(0),this.openedFolders=e):this.activeFolders=this.tree.slice(0,1)},submit(){if(this.activeFolders.length&&this.selectedFileIndex>=0){const e=T(this.activeFolders[0],this.activeFolderFiles[this.selectedFileIndex]);e&&this.$emit("select",e)}this.$emit("input",!1)},log(...e){console.log(...e)}}}),Ke=qe,Qe=(i("0f52"),i("0798")),et=i("62ad"),tt=i("169a"),it=i("ce7e"),ot=i("da13"),st=i("5d23"),nt=i("1baa"),rt=i("71d9"),at=i("2a7f"),lt=i("eb2a"),dt=Object(Se["a"])(Ke,Je,Xe,!1,null,"551bdba5",null),ct=dt.exports;Ve()(dt,{VAlert:Qe["a"],VBtn:Le["a"],VCard:Ae["a"],VCardActions:Ee["a"],VCardText:Ee["b"],VCol:et["a"],VDialog:tt["a"],VDivider:it["a"],VIcon:Oe["a"],VListItem:ot["a"],VListItemContent:st["a"],VListItemGroup:nt["a"],VListItemTitle:st["b"],VRow:Pe["a"],VSpacer:Ne["a"],VToolbar:rt["a"],VToolbarTitle:at["a"],VTreeview:lt["a"]});var ut=o["a"].extend({components:{ModelPicker:ct},name:"ModelCreation",props:{value:Boolean},data:()=>({url:"https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model@master/Live2D/Senko_Normals/senko.model3.json",dropHelpDialog:!1,picker:{dialog:!1},urlError:!1,urlMessages:[]}),watch:{url(e){const t=P(e)||"";this.urlError=/error/i.test(t),this.urlMessages=[t].filter(Boolean)}},methods:{create(){if(this.url=this.url.replace(/\s/,""),this.url||(this.urlError=!0,this.urlMessages=["Please enter a URL"]),this.urlError)return;const e=ke.addModel(this.url);this.$emit("input",!1),this.$emit("create",e)}}}),ht=ut,vt=i("8654"),mt=Object(Se["a"])(ht,Ge,ze,!1,null,"6cfea078",null),pt=mt.exports;Ve()(mt,{VBtn:Le["a"],VCard:Ae["a"],VCardText:Ee["b"],VDialog:tt["a"],VIcon:Oe["a"],VImg:Re["a"],VSpacer:Ne["a"],VTextField:vt["a"],VToolbar:rt["a"],VToolbarTitle:at["a"]});var ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.model?i("div",{staticClass:"model-editor"},[i("v-list",{attrs:{expand:""}},[i("v-list-group",{attrs:{value:!0},scopedSlots:e._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[e._v("Display")])],1)]},proxy:!0}],null,!1,1435882642)},[i("v-list-item",[i("v-list-item-content",[i("div",[i("v-slider",{staticClass:"mt-2",attrs:{dense:"","prepend-icon":"mdi-magnify",messages:String(e.model.scaleX),min:"0.01",max:"3",step:"0.01"},model:{value:e.model.scaleX,callback:function(t){e.$set(e.model,"scaleX",t)},expression:"model.scaleX"}}),i("v-slider",{staticClass:"mt-2",attrs:{dense:"","prepend-icon":"mdi-rotate-right",messages:e.rotationDeg,min:"0",max:"6.28",step:"0.01"},model:{value:e.model.rotation,callback:function(t){e.$set(e.model,"rotation",t)},expression:"model.rotation"}})],1)])],1)],1),i("v-list-group",{attrs:{set:e.motionCount=e.motionGroups.reduce((function(e,t){var i=t.motions;return e+i.length}),0),disabled:!e.motionCount},scopedSlots:e._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",{class:{"text--secondary":!e.motionCount}},[e._v("Motions ("+e._s(e.motionCount)+") ")])],1)]},proxy:!0},{key:"default",fn:function(){return[e._l(e.motionGroups,(function(t){return[i("v-subheader",{key:t.name,staticClass:"px-3"},[e._v(e._s(t.name||"(Nameless)"))]),e._l(t.motions,(function(o,s){return i("v-list-item",{key:t.name+s,attrs:{ripple:"",set:e.active=e.motionState.currentGroup===t.name&&e.motionState.currentIndex===s,disabled:!!o.error},on:{click:function(i){return e.startMotion(t,s)}}},[e.active?i("div",{staticClass:"motion-progress"}):e._e(),i("v-list-item-content",{attrs:{title:o.file}},[i("v-list-item-title",{class:{"primary--text":e.active,"text-decoration-line-through":o.error}},[e._v(" "+e._s(o.file.replace(".mtn","").replace(".motion3.json",""))+" ")])],1),i("v-list-item-icon",{staticClass:"my-0 align-self-center"},[e.active?i("v-icon",{attrs:{size:"32",color:"primary"}},[e._v("mdi-play")]):e.motionState.reservedGroup===t.name&&e.motionState.reservedIndex===s||e.motionState.reservedIdleGroup===t.name&&e.motionState.reservedIdleIndex===s?i("v-progress-circular",{attrs:{indeterminate:"",size:"20",width:"2"}}):e._e()],1)],1)}))]}))]},proxy:!0}],null,!1,260253275),model:{value:e.motionExpand,callback:function(t){e.motionExpand=t},expression:"motionExpand"}}),i("v-list-group",{attrs:{disabled:!e.expressions.length},scopedSlots:e._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",{class:{"text--secondary":!e.expressions.length}},[e._v("Expressions ("+e._s(e.expressions.length)+") ")])],1)]},proxy:!0},{key:"default",fn:function(){return e._l(e.expressions,(function(t,o){return i("v-list-item",{key:o,attrs:{ripple:"",set:e.active=e.currentExpressionIndex===o,disabled:!!t.error},on:{click:function(t){return e.setExpression(o)}}},[i("v-list-item-content",{attrs:{title:t.file}},[i("v-list-item-title",{class:{"primary--text":e.active,"text-decoration-line-through":t.error}},[e._v(" "+e._s(t.file.replace(".exp.json","").replace(".exp3.json",""))+" ")])],1),i("v-list-item-icon",{staticClass:"my-0 align-self-center"},[e.active?i("v-icon",{attrs:{size:"28",color:"primary"}},[e._v("mdi-emoticon-outline")]):e.pendingExpressionIndex===o?i("v-progress-circular",{attrs:{indeterminate:"",size:"20",width:"2"}}):e._e()],1)],1)}))},proxy:!0}],null,!1,457651571)}),i("v-list-group",{scopedSlots:e._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[e._v("Filters")])],1)]},proxy:!0}],null,!1,2196630299)},[i("div",{staticClass:"mt-3"}),e._l(e.filters,(function(t){return i("v-checkbox",{key:t,staticClass:"v-input--reverse mx-3 mt-0",attrs:{label:t+function(e){return e?" ["+e+"]":""}(e.model.filters.indexOf(t)+1),value:t},model:{value:e.model.filters,callback:function(t){e.$set(e.model,"filters",t)},expression:"model.filters"}})}))],2)],1)],1):e._e()},gt=[],bt=i("f678"),xt=i.n(bt),wt=o["a"].extend({name:"ModelEditor",props:{id:{type:Number,default:0},visible:Boolean},data:()=>({model:null,motionExpand:!1,motionGroups:[],motionState:null,motionProgressTimerID:-1,expressions:[],currentExpressionIndex:-1,pendingExpressionIndex:-1,filters:Object.keys(K.filters)}),computed:{rotationDeg(){var e;return Math.round(((null===(e=this.model)||void 0===e?void 0:e.rotation)||0)/Math.PI*180)+"°"}},watch:{id:{immediate:!0,handler(){this.updateModel()}},"model.filters"(){var e;null===(e=this.model)||void 0===e||e.updateFilters()},"motionState.currentGroup":"updateMotionProgress"},mounted(){this.motionProgressTimerID=setInterval(this.updateMotionProgress,50)},methods:{updateModel(){this.resetModel(),this.model=ke.getModel(this.id),this.model&&(this.model.pixiModel?this.pixiModelLoaded(this.model.pixiModel):this.model.once("modelLoaded",this.pixiModelLoaded))},resetModel(){var e,t,i,o,s,n,r;this.model&&(this.model.off("modelLoaded",this.pixiModelLoaded),null===(e=this.model.pixiModel)||void 0===e||e.off("expressionSet",this.expressionSet),null===(t=this.model.pixiModel)||void 0===t||t.off("expressionReserved",this.expressionReserved),null===(o=null===(i=this.model.pixiModel)||void 0===i?void 0:i.internalModel.motionManager)||void 0===o||o.off("motionLoadError",this.motionLoadError),null===(r=null===(n=null===(s=this.model.pixiModel)||void 0===s?void 0:s.internalModel.motionManager)||void 0===n?void 0:n.expressionManager)||void 0===r||r.off("expressionLoadError",this.expressionLoadError),this.motionGroups=[],this.motionState=void 0,this.model=void 0)},pixiModelLoaded(e){var t,i;const o=e.internalModel.motionManager,s=[],n=o.definitions;for(const[a,l]of Object.entries(n))s.push({name:a,motions:(null===l||void 0===l?void 0:l.map((e,t)=>({file:e.file||e.File||"",error:null===o.motionGroups[a][t]?"Failed to load":void 0})))||[]});this.motionGroups=s,this.motionState=o.state;const r=o.expressionManager;this.expressions=(null===r||void 0===r?void 0:r.definitions.map((e,t)=>({file:e.file||e.File||"",error:null===r.expressions[t]?"Failed to load":void 0})))||[],this.currentExpressionIndex=null!==(t=null===r||void 0===r?void 0:r.expressions.indexOf(r.currentExpression))&&void 0!==t?t:-1,this.pendingExpressionIndex=null!==(i=null===r||void 0===r?void 0:r.reserveExpressionIndex)&&void 0!==i?i:-1,e.on("expressionSet",this.expressionSet),e.on("expressionReserved",this.expressionReserved),o.on("motionLoadError",this.motionLoadError),null===r||void 0===r||r.on("expressionLoadError",this.expressionLoadError)},expressionSet(e){this.currentExpressionIndex=e},expressionReserved(e){this.pendingExpressionIndex=e},motionLoadError(e,t,i){const o=this.motionGroups.find(t=>t.name===e);o&&(o.motions[t].error=i)},expressionLoadError(e,t){this.expressions[e].error=t},startMotion(e,t){var i,o;null===(o=null===(i=this.model)||void 0===i?void 0:i.pixiModel)||void 0===o||o.motion(e.name,t,d["MotionPriority"].FORCE)},setExpression(e){var t,i;null===(i=null===(t=this.model)||void 0===t?void 0:t.pixiModel)||void 0===i||i.expression(e)},updateMotionProgress(){var e,t;if(!((null===(e=this.model)||void 0===e?void 0:e.pixiModel)&&void 0!==(null===(t=this.motionState)||void 0===t?void 0:t.currentGroup)&&this.motionExpand&&this.visible&&this.$el))return;const i=this.model.pixiModel.currentMotionStartTime,o=this.model.pixiModel.currentMotionDuration,s=xt()((this.model.pixiModel.elapsedTime-i)/o,0,1);this.$el.style.setProperty("--progress",100*(s-1)+"%")}},beforeDestroy(){this.resetModel(),clearInterval(this.motionProgressTimerID)}}),Mt=wt,yt=(i("b49c"),i("ac7c")),_t=i("8860"),kt=i("56b0"),Ft=i("34c3"),It=i("ba0d"),St=i("e0c7"),Ct=Object(Se["a"])(Mt,ft,gt,!1,null,"8ccebb68",null),Vt=Ct.exports;Ve()(Ct,{VCheckbox:yt["a"],VIcon:Oe["a"],VList:_t["a"],VListGroup:kt["a"],VListItem:ot["a"],VListItemContent:st["a"],VListItemIcon:Ft["a"],VListItemTitle:st["b"],VProgressCircular:je["a"],VSlider:It["a"],VSubheader:St["a"]});var Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["drop-zone",{active:e.draggingOver}]},[e.draggingOver?i("div",{staticClass:"text-h1"},[e._v("Drop Files")]):e._e()])},At=[];const Et=5;let Ot=0;const Rt=d["FileLoader"].createSettings;async function Dt(e){return 1===e.length&&e[0].name.endsWith(".zip")?[]:e.some(e=>k(e.name))?Tt(e):[jt(e)]}async function Tt(e){const t=[],i=[];for(const n of e)k(n.name)?t.push(n):i.push(n);let o;t.length>Et&&(console.warn(`Too many settings files (${t.length}/${Et})`),t.length=Et);const s=[];if(await Promise.all(t.map(async e=>{try{const t=[e,...i],o=await d["FileLoader"].createSettings(t);o.validateFiles(t.map(e=>e.webkitRelativePath)),s.push(o)}catch(t){o=o||t,console.warn(t)}})),!s.length)throw o;return s}function jt(e){const t=e.filter(e=>S(e.name));if(1!==t.length){const e=t.length?`(${t.map(e=>`"${e}"`).join(",")})`:"";throw new Error(`Expected exactly one moc file, got ${t.length} ${e}`)}const i=t[0].webkitRelativePath,o=e.map(e=>e.webkitRelativePath),s=o.filter(e=>e.endsWith(".png"));if(!s.length)throw new Error("Textures not found");const n=o.filter(e=>e.endsWith(".mtn")||e.endsWith(".motion3.json")),r=o.find(e=>e.includes("physics")),a=o.find(e=>e.includes("pose"));let l,c="dummy"+Ot++;return F(i)?(c+=".model.json",l=new d["Cubism2ModelSettings"]({url:c,textures:s,pose:a,physics:r,model:i,motions:n.length?{"":n.map(e=>({file:e}))}:void 0})):(c+=".model3.json",l=new d["Cubism4ModelSettings"]({url:c,Version:3,FileReferences:{Moc:i,Textures:s,Physics:r,Pose:a,Motions:n.length?{"":n.map(e=>({File:e}))}:void 0}})),l._objectURL="DontTouchMe://"+c,l}function Pt(e){var t;return!!(null===(t=e.dataTransfer)||void 0===t?void 0:t.types.some(e=>"Files"===e))}async function $t(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].webkitGetAsEntry());return Ut(t)}async function Ut(e){const t=[];return await Promise.all(e.map(async e=>{if(e.isFile)t.push(await Bt(e));else if(e.isDirectory){const i=await Nt(e);t.push(...await Ut(i))}})),t}function Nt(e){return new Promise((t,i)=>{e.createReader().readEntries(t,i)})}async function Bt(e){const t=await new Promise((t,i)=>e.file(t,i));let i=e.fullPath;return i.startsWith("/")&&(i=i.slice(1)),Object.defineProperty(t,"webkitRelativePath",{value:i}),t}function Ht(e){return new Promise((t,i)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=i,o.readAsDataURL(e)})}d["FileLoader"].createSettings=async e=>e.find(e=>k(e.name))?Rt(e):jt(e);const Wt="_bg";var Gt;(function(e){let t,i="";async function o(t){const o=URL.createObjectURL(t);document.body.style.backgroundImage=`url(${o})`,e.current=t.name,e.emitter.emit("change",e.current),i=o;const s=await Ht(t);i===o&&localStorage.setItem(Wt,s),URL.revokeObjectURL(o)}function s(){e.current="",document.body.style.backgroundImage="",document.body.style.backgroundColor="#222222",localStorage.removeItem(Wt),t&&(document.head.removeChild(t),t=void 0),e.emitter.emit("change",e.current)}function n(){t=document.createElement("style");const i=localStorage.getItem("_bg");i?(t.innerText=`body {background-image: url(${i});}`,e.current="(local file)"):t.innerText="body {background-color: #222222;}",document.head.appendChild(t),document.body.style.backgroundSize="cover"}e.emitter=new M["EventEmitter"],e.current="",e.set=o,e.reset=s,n()})(Gt||(Gt={}));var zt=o["a"].extend({name:"DropZone",data:()=>({draggingOver:!1}),created(){document.ondragenter=e=>Pt(e)&&(this.draggingOver=!0),document.ondragleave=e=>Pt(e)&&(this.draggingOver=!!e.relatedTarget),document.ondragover=e=>Pt(e)&&e.preventDefault(),document.ondrop=e=>Pt(e)&&this.drop(e)},methods:{async drop(e){var t;if(e.preventDefault(),this.draggingOver=!1,null===(t=e.dataTransfer)||void 0===t?void 0:t.items.length){const t=await $t(e.dataTransfer.items);1===t.length&&t[0].type.includes("image")?Gt.set(t[0]).catch(console.warn):this.uploadModel(t).then()}},async uploadModel(e){try{const t=await Dt(e);if(t.length)for(const i of t){const t=e;t.settings=i,ke.addModel(t)}else ke.addModel(e)}catch(t){t.message="Failed to load model: "+t.message,this.$emit("error",t)}}}}),Jt=zt,Xt=(i("3638"),Object(Se["a"])(Jt,Lt,At,!1,null,"46daefec",null)),Yt=Xt.exports,Zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings pa-3 flex-column flex-grow-1"},[i("div",[i("v-slider",{staticClass:"mt-4 mb-10",attrs:{dense:"","prepend-icon":"mdi-volume-high",messages:~~(100*e.volume)+"%",min:"0",max:"1",step:"0.02"},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}}),i("v-switch",{staticClass:"v-input--reverse",attrs:{label:"Show hit area frames"},model:{value:e.hitAreaFrames,callback:function(t){e.hitAreaFrames=t},expression:"hitAreaFrames"}}),i("v-switch",{staticClass:"v-input--reverse",attrs:{label:"Show model frames"},model:{value:e.modelFrame,callback:function(t){e.modelFrame=t},expression:"modelFrame"}}),i("v-switch",{staticClass:"v-input--reverse",attrs:{label:"Show stats"},model:{value:e.stats,callback:function(t){e.stats=t},expression:"stats"}}),e.currentBackground?[i("v-divider"),i("v-subheader",{staticClass:"px-0"},[e._v("Background")]),i("div",{staticClass:"mt-2 d-flex align-center"},[i("span",[e._v(e._s(e.currentBackground))]),i("v-spacer"),i("v-btn",{attrs:{color:"secondary"},on:{click:e.resetBackground}},[e._v("Reset")])],1)]:e._e()],2),i("v-spacer"),i("v-divider"),i("div",{staticClass:"pt-4 d-flex align-center"},[i("v-icon",{staticClass:"mr-2"},[e._v("mdi-github")]),e._m(0)],1),i("span",{staticClass:"pt-4 body-2 text--secondary"},[e._v("Last built: "+e._s(e.lastUpdated))])],1)},qt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._v("View source on "),i("a",{staticClass:"text-decoration-none",attrs:{href:"https://github.com/guansss/live2d-viewer-web"}},[e._v("GitHub")])])}],Kt=o["a"].extend({name:"Settings",data:()=>({volume:0,hitAreaFrames:!1,modelFrame:!1,stats:!1,lastUpdated:new Date(1611683935929).toLocaleString(),currentBackground:Gt.current}),watch:{stats(e){ke.showStats=e},volume(e){ke.volume=e},hitAreaFrames(e){ke.showHitAreaFrames=e},modelFrame(e){ke.showModelFrame=e}},created(){this.stats=ke.showStats,this.volume=ke.volume,this.hitAreaFrames=ke.showHitAreaFrames,this.modelFrame=ke.showModelFrame,Gt.emitter.on("change",this.backgroundChanged,this)},methods:{resetBackground(){Gt.reset()},backgroundChanged(e){this.currentBackground=e}},beforeDestroy(){Gt.emitter.off("change",this.backgroundChanged)}}),Qt=Kt,ei=(i("6d4b"),i("b73d")),ti=Object(Se["a"])(Qt,Zt,qt,!1,null,"3613741a",null),ii=ti.exports;Ve()(ti,{VBtn:Le["a"],VDivider:it["a"],VIcon:Oe["a"],VSlider:It["a"],VSpacer:Ne["a"],VSubheader:St["a"],VSwitch:ei["a"]});var oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{width:"1000","max-width":"90vw",value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[i("v-card",{staticClass:"d-flex flex-column",attrs:{height:"90vh"}},[i("v-toolbar",{staticClass:"flex-grow-0",attrs:{color:"primary",flat:"",dense:""}},[i("v-toolbar-title",[e._v("Model Info")]),i("v-spacer"),i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[i("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.log}},"v-btn",s,!1),o),[i("v-icon",[e._v("mdi-console")])],1)]}}])},[i("span",[e._v("Log to console")])]),i("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("input",!1)}}},[i("v-icon",[e._v("mdi-close")])],1)],1),i("v-card-text",{staticClass:"pa-8 overflow-auto"},[i("div",{staticClass:"mb-6 text-no-wrap"},[e._v("URL: "+e._s(e.url))]),i("pre",{staticClass:"code"},[e._v(e._s(e.settingsJSON))])])],1)],1)},si=[],ni=o["a"].extend({name:"ModelInfo",props:{value:Boolean,id:Number},data:()=>({url:"",settingsJSON:""}),watch:{value(e){var t,i;if(e){const e=null===(i=null===(t=ke.getModel(this.id))||void 0===t?void 0:t.pixiModel)||void 0===i?void 0:i.internalModel.settings;this.url=(null===e||void 0===e?void 0:e.url)||"",this.settingsJSON=JSON.stringify((null===e||void 0===e?void 0:e.json)||{},null,2)}}},methods:{log(){console.log(JSON.parse(this.settingsJSON))}}}),ri=ni,ai=(i("30ef"),Object(Se["a"])(ri,oi,si,!1,null,"05f5420d",null)),li=ai.exports;Ve()(ai,{VBtn:Le["a"],VCard:Ae["a"],VCardText:Ee["b"],VDialog:tt["a"],VIcon:Oe["a"],VSpacer:Ne["a"],VToolbar:rt["a"],VToolbarTitle:at["a"],VTooltip:Be["a"]});var di=o["a"].extend({name:"App",components:{ModelList:We,ModelCreation:pt,ModelEditor:Vt,DropZone:Yt,ModelInfo:li,Settings:ii},data:()=>({drawer:!0,drawerSwitch:!1,loading:!1,tab:-1,modelList:{visible:!0},selectedModelID:0,modelInfoDialog:!1,creation:{dialog:!1,result:null},snackbar:{visible:!1,message:"",timeout:5e3}}),computed:{drawerWidth(){return this.$vuetify.breakpoint.xl?450:360},modelName(){var e;return(null===(e=ke.getModel(this.selectedModelID))||void 0===e?void 0:e.name)||""}},methods:{showUI(e){this.drawer=e,this.modelList.visible=e,this.drawerSwitch=!1},snack(e,t=5e3){this.snackbar.message=e,this.snackbar.timeout=t,this.snackbar.visible=!0},error(e){const t=e&&e.message||e+"";t&&this.snack(t,-1)},log(...e){console.log(...e)}},created(){this.tab=void 0,this.creation.dialog=!0,Gt.current||this.snack("Drag and drop an image to set the background!")}}),ci=di,ui=(i("3106"),i("490c"),i("7496")),hi=i("a609"),vi=i("a523"),mi=i("f6c4"),pi=i("f774"),fi=i("2db4"),gi=Object(Se["a"])(ci,s,n,!1,null,"27496f6c",null),bi=gi.exports;Ve()(gi,{VApp:ui["a"],VBtn:Le["a"],VBtnToggle:hi["a"],VContainer:vi["a"],VDivider:it["a"],VFabTransition:Ue["b"],VIcon:Oe["a"],VMain:mi["a"],VNavigationDrawer:pi["a"],VSnackbar:fi["a"],VSpacer:Ne["a"],VToolbar:rt["a"],VToolbarTitle:at["a"],VTooltip:Be["a"]});var xi=i("f309");o["a"].use(xi["a"]);var wi=new xi["a"]({theme:{dark:!0,options:{customProperties:!0},themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});o["a"].config.productionTip=!1,o["a"].directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"})),window.vueApp=new o["a"]({vuetify:wi,render:e=>e(bi)}).$mount("#app"),window.App=ke,window.config=d["config"],d["config"].logLevel=d["config"].LOG_LEVEL_VERBOSE},d016:function(e,t,i){}});
//# sourceMappingURL=app.0c16ee4b.js.map